---
layout: post
title: 什么是raid？服务器怎么做磁盘阵列raid1？
date: 2017-04-18
categories: blog
tags: [operations]
description: 什么是raid？服务器怎么做磁盘阵列raid1？
---

## 什么是raid？
 
raid的英文全拼为“Redundant Arrays of Inexpensive Disks，RAID”，中文翻译过来就是“磁盘阵列”。

原理是利用数组方式来作磁盘组，配合数据分散排列的设计，提升数据的安全性。磁盘阵列是由很多价格较便宜的磁盘，组合成一个容量巨大的磁盘组，利用个别磁盘提供数据所产生加成效果提升整个磁盘系统效能。利用这项技术，将数据切割成许多区段，分别存放在各个硬盘上。

磁盘阵列还能利用同位检查（Parity Check）的观念，在数组中任一颗硬盘故障时，仍可读出数据，在数据重构时，将数据经计算后重新置入新硬盘中。
 
## 服务器做raid的作用及好处
 
速度更快，安全性更高，相互备份，防止硬盘坏了，另一个硬盘数据还在（两个盘数据一样），读取速度加快。因为是同时从好几块硬盘上面读写。2块就是2倍，4块就是4倍。当然这只是理论上的说法，并不能达到那么好的效果。2块就1倍多，4块大概有3倍吧。
 
 
#### 磁盘阵列其样式有三种：

1. 外接式磁盘阵列柜
2. 内接式磁盘阵列卡
3. 利用软件来仿真。

**外接式磁盘阵列柜** 最常被使用大型服务器上，具可热抽换（Hot Swap）的特性，不过这类产品的价格都很贵。

**内接式磁盘阵列卡**，因为价格便宜，但需要较高的安装技术，适合技术人员使用操作。

**利用软件仿真**的方式，由于会拖累机器的速度，不适合大数据流量的服务器。

#### RAID级别定义：
 
目前对RAID级别的定义分别为raid0、1、2、3、4、5、6等，可以获得业界广泛认同的有4种，**RAID 0、RAID 1、RAID 0+1和RAID 5**。 
 
**RAID 0** 具有成本低、读写性能极高、存储空间利用率高等特点。但由于没有数据冗余，其安全性大大降低，阵列中的任何一块硬盘的损坏都将带来灾难性的数据损失。所以，RAID 0中配置的硬盘不宜太多。 
 
**RAID 1** 是两块硬盘数据完全镜像，它具有安全性高、技术简单、管理方便、读写性能良好等特点。但它无法扩展单块硬盘容量，数据空间浪费大。 
 
**RAID 0+1** 综合了RAID 0和RAID 1的特点，独立磁盘配置成RAID 0，两套完整的RAID 0互相镜像。它的读写性能出色、安全性高，但构建此类阵列的成本投入大，数据空间利用率低，不能称之为经济高效的方案。

**RAID 5** 可以理解为是RAID 0和RAID 1的折中方案。RAID 5可以为系统提供数据安全保障，但保障程度要比Mirror（raid1）低而磁盘空间利用率要比Mirror高。RAID 5具有和RAID 0相近似的数据读取速度，只是多了一个奇偶校验信息，写入数据的速度比对单个磁盘进行写入操作稍慢。同时由于多个数据对应一个奇偶校验信息，RAID 5的磁盘空间利用率要比RAID 1高，存储成本相对较低，是目前运用较多的一种解决方案。

## 服务器怎么做raid？
 
首先我们要看**主板是否支持raid功能**，如果不支持您可以购买一个**pci的raid磁盘阵列卡**。

#### 修改硬盘模式为RAID Mode

以华硕p8b-x服务器主板为例，首先我们开机连续点击键盘 del 进入bios设置，选择 “advanced选项卡” ，更改硬盘模式，在 SATA configuration 里的 detemines how SATA controller(s) 选项里选择**”RAID mode“**模式。按 F10 保存设置即可。

#### RAID磁盘阵列设置

重启电脑后，按 Ctrl+I 键（开机后有提示的）进入以上界面，我们选择 “create RAID volume” 选项，创建一个磁盘阵列 “RAID”。之后进入下个界面。
 
填写name(名字)，随便填写,比如“XXX-raid1”，使用tab键切换到 RAID Level，调整为 **raid1（mirror）**，其他参数不变，继续使用tab键切换到 create volume，回车按 Y,完成创建raid。

回到bios设置，在boot启动选项boot option #1里，选择刚创建的 raid（选择刚raid设置里的名字） ，然后开机正常安装系统即可。